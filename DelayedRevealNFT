// SPDX-License-Identifier: MIT
pragma solidity ^0.8.20;

import "@openzeppelin/contracts/token/ERC721/ERC721.sol";
import "@openzeppelin/contracts/access/Ownable.sol";

contract DelayedRevealNFT is ERC721, Ownable {
    bool public revealed = false;
    string public unrevealedURI;
    string public baseURI;

    constructor(address initialOwner) ERC721("MysteryBox", "BOX") Ownable(initialOwner) {
        unrevealedURI = "ipfs://QmUnrevealedHash";
    }

    function reveal(string memory _newBaseURI) public onlyOwner {
        revealed = true;
        baseURI = _newBaseURI;
    }

    function tokenURI(uint256 tokenId) public view override returns (string memory) {
        _requireOwned(tokenId);
        if (!revealed) {
            return unrevealedURI;
        }
        return string(abi.encodePacked(baseURI, tokenId));
    }
}
